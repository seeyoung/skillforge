{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Skillforge Project Settings",
  "description": "Project-specific settings for skillforge skills",
  "type": "object",
  "properties": {
    "index": {
      "type": "object",
      "description": "Index file management settings",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable automatic index file updates",
          "default": false
        },
        "file": {
          "type": "string",
          "description": "Path to the index file",
          "default": "INDEX.md"
        },
        "track": {
          "type": "array",
          "description": "File patterns to track for index updates",
          "items": { "type": "string" },
          "examples": [["*Service.groovy", "*Utils.groovy", "src/**/*.ts"]]
        },
        "timestampFormat": {
          "type": "string",
          "description": "Timestamp format for index updates",
          "default": "YYYY-MM-DD HH:mm"
        }
      }
    },
    "commit": {
      "type": "object",
      "description": "Git commit settings",
      "properties": {
        "language": {
          "type": "string",
          "enum": ["en", "ko"],
          "description": "Commit message language",
          "default": "en"
        },
        "conventionalCommits": {
          "type": "boolean",
          "description": "Use conventional commits format",
          "default": true
        },
        "coAuthor": {
          "type": "string",
          "description": "Co-author for commits",
          "default": "Claude <noreply@anthropic.com>"
        }
      }
    },
    "restart": {
      "type": "object",
      "description": "Dev server restart settings",
      "properties": {
        "port": {
          "type": "integer",
          "description": "Default dev server port",
          "default": 3000
        },
        "command": {
          "type": "string",
          "description": "Custom start command",
          "examples": ["npm run dev", "yarn dev", "./gradlew bootRun"]
        },
        "framework": {
          "type": "string",
          "enum": ["next", "vite", "cra", "express", "spring", "django", "auto"],
          "description": "Framework type (auto-detected if not specified)",
          "default": "auto"
        },
        "cacheDir": {
          "type": "array",
          "description": "Cache directories to clean on --clean",
          "items": { "type": "string" },
          "examples": [[".next"], ["build", ".gradle"], ["dist", ".vite"]]
        },
        "logFile": {
          "type": "string",
          "description": "Log file path",
          "default": "/tmp/${PROJECT_NAME}-dev.log",
          "examples": ["logs/dev.log", "/tmp/myapp-dev.log"]
        }
      }
    },
    "test": {
      "type": "object",
      "description": "Test runner settings",
      "properties": {
        "command": {
          "type": "string",
          "description": "Custom test command",
          "examples": ["npm test", "pytest", "./gradlew test"]
        },
        "coverage": {
          "type": "boolean",
          "description": "Run with coverage by default",
          "default": false
        },
        "coverageThreshold": {
          "type": "integer",
          "description": "Minimum coverage percentage",
          "minimum": 0,
          "maximum": 100
        },
        "watchCommand": {
          "type": "string",
          "description": "Watch mode command",
          "examples": ["npm test -- --watch", "pytest-watch"]
        },
        "e2eCommand": {
          "type": "string",
          "description": "E2E test command",
          "examples": ["npx playwright test", "npx cypress run"]
        },
        "unitPattern": {
          "type": "string",
          "description": "Unit test file pattern",
          "default": "**/*.test.*"
        },
        "integrationPattern": {
          "type": "string",
          "description": "Integration test file pattern",
          "default": "**/*.integration.*"
        },
        "e2ePattern": {
          "type": "string",
          "description": "E2E test file pattern",
          "default": "e2e/**/*"
        },
        "setupCommand": {
          "type": "string",
          "description": "Command to run before tests",
          "examples": ["docker-compose up -d", "npm run test:setup"]
        },
        "teardownCommand": {
          "type": "string",
          "description": "Command to run after tests",
          "examples": ["docker-compose down", "npm run test:teardown"]
        }
      }
    },
    "issue": {
      "type": "object",
      "description": "GitHub issue resolution settings",
      "properties": {
        "branchPrefix": {
          "type": "object",
          "description": "Branch naming prefixes",
          "properties": {
            "fix": {
              "type": "string",
              "description": "Prefix for bug fix branches",
              "default": "fix/issue-"
            },
            "feat": {
              "type": "string",
              "description": "Prefix for feature branches",
              "default": "feat/issue-"
            },
            "default": {
              "type": "string",
              "enum": ["fix", "feat"],
              "description": "Default branch type",
              "default": "fix"
            }
          }
        },
        "review": {
          "type": "object",
          "description": "Code review settings",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable AI code review",
              "default": false
            },
            "command": {
              "type": "string",
              "description": "Review script path",
              "examples": ["~/.claude/scripts/ai-collab.sh"]
            },
            "maxRounds": {
              "type": "integer",
              "description": "Maximum review rounds",
              "default": 3
            }
          }
        },
        "autoCreateBranch": {
          "type": "boolean",
          "description": "Automatically create branch for issue",
          "default": false
        },
        "autoClose": {
          "type": "boolean",
          "description": "Automatically close issue after commit",
          "default": true
        }
      }
    },
    "build": {
      "type": "object",
      "description": "Build settings",
      "properties": {
        "command": {
          "type": "string",
          "description": "Default build command",
          "examples": ["npm run build", "./gradlew build", "cargo build"]
        },
        "devCommand": {
          "type": "string",
          "description": "Development build command"
        },
        "prodCommand": {
          "type": "string",
          "description": "Production build command"
        },
        "cleanCommand": {
          "type": "string",
          "description": "Clean command",
          "examples": ["rm -rf dist", "./gradlew clean"]
        },
        "outputDir": {
          "type": "string",
          "description": "Build output directory",
          "examples": ["dist", "build", "target"]
        },
        "artifactDir": {
          "type": "array",
          "description": "Directories to clean",
          "items": { "type": "string" },
          "default": ["dist", "build"]
        },
        "preBuildCommand": {
          "type": "string",
          "description": "Command to run before build",
          "examples": ["npm run lint", "npm run test"]
        },
        "postBuildCommand": {
          "type": "string",
          "description": "Command to run after build",
          "examples": ["npm run test", "docker push"]
        },
        "env": {
          "type": "object",
          "description": "Environment variables for build",
          "additionalProperties": { "type": "string" }
        }
      }
    },
    "implement": {
      "type": "object",
      "description": "Implementation settings",
      "properties": {
        "framework": {
          "type": "string",
          "description": "Framework type",
          "examples": ["spring", "react", "vue", "angular", "express"]
        },
        "language": {
          "type": "string",
          "description": "Programming language",
          "examples": ["java", "kotlin", "typescript", "javascript", "python", "go"]
        },
        "tdd": {
          "type": "boolean",
          "description": "Enable TDD by default",
          "default": false
        },
        "qualityGate": {
          "type": "string",
          "description": "Quality gate command",
          "examples": ["./gradlew qualityGate", "npm run quality"]
        },
        "testCommand": {
          "type": "string",
          "description": "Test command (overrides test.command)"
        },
        "lintCommand": {
          "type": "string",
          "description": "Lint command"
        },
        "srcDir": {
          "type": "string",
          "description": "Source directory",
          "examples": ["src/main/java", "src"]
        },
        "testDir": {
          "type": "string",
          "description": "Test directory",
          "examples": ["src/test/java", "__tests__"]
        },
        "componentDir": {
          "type": "string",
          "description": "Component directory (frontend)",
          "default": "src/components"
        },
        "conventions": {
          "type": "object",
          "description": "Code conventions",
          "properties": {
            "maxMethodLines": {
              "type": "integer",
              "description": "Maximum method lines",
              "default": 30
            },
            "maxParams": {
              "type": "integer",
              "description": "Maximum method parameters",
              "default": 5
            },
            "maxNestingDepth": {
              "type": "integer",
              "description": "Maximum nesting depth",
              "default": 2
            }
          }
        }
      }
    },
    "analyze": {
      "type": "object",
      "description": "Code analysis settings",
      "properties": {
        "lintCommand": {
          "type": "string",
          "description": "Lint command",
          "examples": ["npm run lint", "./gradlew checkstyleMain"]
        },
        "formatCommand": {
          "type": "string",
          "description": "Format check command",
          "examples": ["npm run format:check", "prettier --check"]
        },
        "typeCheckCommand": {
          "type": "string",
          "description": "Type check command",
          "examples": ["tsc --noEmit", "mypy"]
        },
        "securityCommand": {
          "type": "string",
          "description": "Security scan command",
          "examples": ["npm audit", "./gradlew dependencyCheckAnalyze"]
        },
        "qualityCommand": {
          "type": "string",
          "description": "Quality gate command",
          "examples": ["./gradlew qualityGate"]
        },
        "exclude": {
          "type": "array",
          "description": "Paths to exclude from analysis",
          "items": { "type": "string" },
          "default": ["node_modules", "dist", "build"]
        },
        "rules": {
          "type": "object",
          "description": "Analysis rules",
          "properties": {
            "maxFileLines": {
              "type": "integer",
              "description": "Maximum file lines",
              "default": 500
            },
            "maxMethodLines": {
              "type": "integer",
              "description": "Maximum method lines",
              "default": 30
            },
            "maxComplexity": {
              "type": "integer",
              "description": "Maximum cyclomatic complexity",
              "default": 10
            }
          }
        },
        "security": {
          "type": "object",
          "description": "Security analysis settings",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable security analysis",
              "default": true
            },
            "scanSecrets": {
              "type": "boolean",
              "description": "Scan for hardcoded secrets",
              "default": true
            },
            "dependencyCheck": {
              "type": "boolean",
              "description": "Check dependency vulnerabilities",
              "default": true
            }
          }
        }
      }
    }
  }
}
