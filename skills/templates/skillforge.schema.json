{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Skillforge Project Settings",
  "description": "Project-specific settings for skillforge skills",
  "type": "object",
  "properties": {
    "index": {
      "type": "object",
      "description": "Index file management settings",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable automatic index file updates",
          "default": false
        },
        "file": {
          "type": "string",
          "description": "Path to the index file",
          "default": "INDEX.md"
        },
        "track": {
          "type": "array",
          "description": "File patterns to track for index updates",
          "items": { "type": "string" },
          "examples": [["*Service.groovy", "*Utils.groovy", "src/**/*.ts"]]
        },
        "timestampFormat": {
          "type": "string",
          "description": "Timestamp format for index updates",
          "default": "YYYY-MM-DD HH:mm"
        }
      }
    },
    "commit": {
      "type": "object",
      "description": "Git commit settings",
      "properties": {
        "language": {
          "type": "string",
          "enum": ["en", "ko"],
          "description": "Commit message language",
          "default": "en"
        },
        "conventionalCommits": {
          "type": "boolean",
          "description": "Use conventional commits format",
          "default": true
        },
        "coAuthor": {
          "type": "string",
          "description": "Co-author for commits",
          "default": "Claude <noreply@anthropic.com>"
        }
      }
    },
    "restart": {
      "type": "object",
      "description": "Dev server restart settings",
      "properties": {
        "port": {
          "type": "integer",
          "description": "Default dev server port",
          "default": 3000
        },
        "command": {
          "type": "string",
          "description": "Custom start command",
          "examples": ["npm run dev", "yarn dev", "./gradlew bootRun"]
        },
        "framework": {
          "type": "string",
          "enum": ["next", "vite", "cra", "express", "spring", "django", "auto"],
          "description": "Framework type (auto-detected if not specified)",
          "default": "auto"
        },
        "cacheDir": {
          "type": "array",
          "description": "Cache directories to clean on --clean",
          "items": { "type": "string" },
          "examples": [[".next"], ["build", ".gradle"], ["dist", ".vite"]]
        },
        "logFile": {
          "type": "string",
          "description": "Log file path",
          "default": "/tmp/${PROJECT_NAME}-dev.log",
          "examples": ["logs/dev.log", "/tmp/myapp-dev.log"]
        }
      }
    },
    "test": {
      "type": "object",
      "description": "Test runner settings",
      "properties": {
        "command": {
          "type": "string",
          "description": "Custom test command",
          "examples": ["npm test", "pytest", "./gradlew test"]
        },
        "coverage": {
          "type": "boolean",
          "description": "Run with coverage by default",
          "default": false
        },
        "coverageThreshold": {
          "type": "integer",
          "description": "Minimum coverage percentage",
          "minimum": 0,
          "maximum": 100
        },
        "watchCommand": {
          "type": "string",
          "description": "Watch mode command",
          "examples": ["npm test -- --watch", "pytest-watch"]
        },
        "e2eCommand": {
          "type": "string",
          "description": "E2E test command",
          "examples": ["npx playwright test", "npx cypress run"]
        },
        "unitPattern": {
          "type": "string",
          "description": "Unit test file pattern",
          "default": "**/*.test.*"
        },
        "integrationPattern": {
          "type": "string",
          "description": "Integration test file pattern",
          "default": "**/*.integration.*"
        },
        "e2ePattern": {
          "type": "string",
          "description": "E2E test file pattern",
          "default": "e2e/**/*"
        },
        "setupCommand": {
          "type": "string",
          "description": "Command to run before tests",
          "examples": ["docker-compose up -d", "npm run test:setup"]
        },
        "teardownCommand": {
          "type": "string",
          "description": "Command to run after tests",
          "examples": ["docker-compose down", "npm run test:teardown"]
        }
      }
    },
    "issue": {
      "type": "object",
      "description": "GitHub issue resolution settings",
      "properties": {
        "branchPrefix": {
          "type": "object",
          "description": "Branch naming prefixes",
          "properties": {
            "fix": {
              "type": "string",
              "description": "Prefix for bug fix branches",
              "default": "fix/issue-"
            },
            "feat": {
              "type": "string",
              "description": "Prefix for feature branches",
              "default": "feat/issue-"
            },
            "default": {
              "type": "string",
              "enum": ["fix", "feat"],
              "description": "Default branch type",
              "default": "fix"
            }
          }
        },
        "review": {
          "type": "object",
          "description": "Code review settings",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable AI code review",
              "default": false
            },
            "command": {
              "type": "string",
              "description": "Review script path",
              "examples": ["~/.claude/scripts/ai-collab.sh"]
            },
            "maxRounds": {
              "type": "integer",
              "description": "Maximum review rounds",
              "default": 3
            }
          }
        },
        "autoCreateBranch": {
          "type": "boolean",
          "description": "Automatically create branch for issue",
          "default": false
        },
        "autoClose": {
          "type": "boolean",
          "description": "Automatically close issue after commit",
          "default": true
        }
      }
    }
  }
}
